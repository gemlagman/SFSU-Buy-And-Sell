<!-- 
  //  This partial is for the messages page that holds the implentation of the email messages for the //  users to find their sent or received messages from users trying to contact them on their posted //  items
 -->

<div class="MessageBox overflow-auto">
  <h3 style="background-color: indigo; color: white;" class=" text-center py-3 sticky-top"><%= username %>'s Messages</h3>
  <div class="messaging">
    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th>Seller</th>
            <th>Sender</th>
            <th>Receiver</th>
            <th>Listing</th>
            <th>Message</th>
            <th>Date</th>
            <th>Reply</th>
          </tr>
        </thead>
        <tbody>
          <% emails.forEach(function(emails){ %>
          <tr>
            <td><%= emails.seller %></td>
            <td><%= emails.sender %></td>
            <td><%= emails.receiver %></td>
            <td><%= emails.listing %></td>
            <td class="messageText"><%= emails.message %></td>
            <td><%= emails.date %></td>
            <% if (emails.receiver_id == userId) {%>
            <td>
              <a class="modalbtn " href="#replyBox">
                <button
                  class="btn btn-warning btn-block"
                  style="width: 100%"
                  data-toggle="modal"
                  data-target="#replyBox-<%= emails.id %>"
                >
                  Reply
                </button>
              </a>
            </td>
            <% } %> <% }); %>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
